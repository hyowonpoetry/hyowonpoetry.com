// Sample articles data - In a real app, this would come from a backend
const articles = [
  {
    id: 1,
    title: "Reflections of the Unspoken",
    excerpt: `Between your words I hear the sea  
it breathes and folds inside of me  
a mirror trembling in the tide  
where loss and wonder coincide  

I walk through silence made of gold  
the dusk grows warm, the air grows cold  
and somewhere far your shadow gleams  
woven through my waking dreams  

The stars are questions, soft and deep  
they guard the hours I cannot keep  
the moon dissolves in quiet grace  
and paints your name across its face  

I reach for light yet touch the mist  
the air remembers where we kissed  
not lips but thoughts, not skin but soul  
two halves that once were one and whole  

In every wave your voice returns  
in every word the candle burns  
and though the distance hides the shore  
I feel your nearness even more  

So if the night forgets to shine  
I’ll make its darkness wholly mine  
I’ll write until the dawn appears  
and drink the silence of your years  

For you are wind and I am flame  
we move, we change, yet stay the same  
your light becomes the breath I take  
your soul the mirror I awake`,
    content: `Between your words I hear the sea  
it breathes and folds inside of me  
a mirror trembling in the tide  
where loss and wonder coincide  

I walk through silence made of gold  
the dusk grows warm, the air grows cold  
and somewhere far your shadow gleams  
woven through my waking dreams  

The stars are questions, soft and deep  
they guard the hours I cannot keep  
the moon dissolves in quiet grace  
and paints your name across its face  

I reach for light yet touch the mist  
the air remembers where we kissed  
not lips but thoughts, not skin but soul  
two halves that once were one and whole  

In every wave your voice returns  
in every word the candle burns  
and though the distance hides the shore  
I feel your nearness even more  

So if the night forgets to shine  
I’ll make its darkness wholly mine  
I’ll write until the dawn appears  
and drink the silence of your years  

For you are wind and I am flame  
we move, we change, yet stay the same  
your light becomes the breath I take  
your soul the mirror I awake`,
    author: "H",
    date: "2025-10-15",
    image: "https://source.unsplash.com/random/600x400/?poetry,nature"
  },
  {
    id: 2,
    title: "The Circle of Light",
    excerpt: `I woke in a silence that was not silence  
It had the weight of distant oceans  
the breath of places I had never seen  
and the echo of footsteps that might have been my own  

The air was full of invisible wings  
They brushed against me as I moved  
their touch like thought before it forms a word  
and I knew then that the unseen was real  
and that what we call reality  
is only its reflection  

In the mirror of water I saw faces  
not of others but of myself  
split into many lives  
each one watching the other  
each one waiting for recognition  

There was one who believed too much  
and another who believed nothing  
one who built temples out of words  
and another who tore them down in silence  
and yet they were all me  
drifting like leaves on the surface of a lake  
held together by an invisible current  

I walked among them asking  
which of you is true  
but they did not answer  
only the wind replied  
with its endless argument  
between departure and return  

Then I remembered what you said  
that art is the ladder between heaven and earth  
and I saw that love was the hand that steadies it  
while faith is the breath that dares to climb  
and I thought  
perhaps we were never meant to reach the top  
perhaps the beauty lies in the climbing itself  
the trembling of the rung beneath our feet  
the moment before the next step  

And there in that thought  
light began to rise from within  
It did not blind  
It revealed  
It showed me the dust in the beam  
the hidden color inside shadow  
the quiet pulse of the world  
beating beneath all our noise  

I stood still  
and felt everything move through me  
the pain the joy the endless reaching  
and I understood  
that to be human  
is to be both the mirror and what it reflects  
the voice and the silence that listens  
the seed and the sky that receives it  

And when I opened my eyes  
the world was the same  
but it had changed  
because I had`,
    content: `I woke in a silence that was not silence  
It had the weight of distant oceans  
the breath of places I had never seen  
and the echo of footsteps that might have been my own  

The air was full of invisible wings  
They brushed against me as I moved  
their touch like thought before it forms a word  
and I knew then that the unseen was real  
and that what we call reality  
is only its reflection  

In the mirror of water I saw faces  
not of others but of myself  
split into many lives  
each one watching the other  
each one waiting for recognition  

There was one who believed too much  
and another who believed nothing  
one who built temples out of words  
and another who tore them down in silence  
and yet they were all me  
drifting like leaves on the surface of a lake  
held together by an invisible current  

I walked among them asking  
which of you is true  
but they did not answer  
only the wind replied  
with its endless argument  
between departure and return  

Then I remembered what you said  
that art is the ladder between heaven and earth  
and I saw that love was the hand that steadies it  
while faith is the breath that dares to climb  
and I thought  
perhaps we were never meant to reach the top  
perhaps the beauty lies in the climbing itself  
the trembling of the rung beneath our feet  
the moment before the next step  

And there in that thought  
light began to rise from within  
It did not blind  
It revealed  
It showed me the dust in the beam  
the hidden color inside shadow  
the quiet pulse of the world  
beating beneath all our noise  

I stood still  
and felt everything move through me  
the pain the joy the endless reaching  
and I understood  
that to be human  
is to be both the mirror and what it reflects  
the voice and the silence that listens  
the seed and the sky that receives it  

And when I opened my eyes  
the world was the same  
but it had changed  
because I had`,
    author: "H",
    date: "2025-10-10",
    image: "https://source.unsplash.com/random/600x400/?midnight,sky"
  },
  {
    id: 3,
    title: "Between Silence and Light",
    excerpt: `I walk in a field where no one waits  
The grass bends but no wind moves  
It is the memory of footsteps  
That keeps the earth awake  

A bird rises without wings  
Only with the weight of longing  
And I, who have nothing to give it  
Offer my gaze as a branch  

The silence here is not empty  
It listens  
It carries the voices of those  
Who once believed the world was theirs  
And it carries me, too,  
Back into myself  

Then light arrives, not sudden  
But soft as if it had always been here  
It touches the stones, the shadows  
Even my hands  
And in that touch I hear  
What cannot be said  
Only lived`,
    content: `I walk in a field where no one waits  
The grass bends but no wind moves  
It is the memory of footsteps  
That keeps the earth awake  

A bird rises without wings  
Only with the weight of longing  
And I, who have nothing to give it  
Offer my gaze as a branch  

The silence here is not empty  
It listens  
It carries the voices of those  
Who once believed the world was theirs  
And it carries me, too,  
Back into myself  

Then light arrives, not sudden  
But soft as if it had always been here  
It touches the stones, the shadows  
Even my hands  
And in that touch I hear  
What cannot be said  
Only lived`,
    author: "H",
    date: "2025-10-05",
    image: "https://source.unsplash.com/random/600x400/?autumn,leaves"
  },
  {
    id: 4,
    title: "The Blind Fire",
    excerpt: `There are hands that take without trembling  
draining the vessel of another soul  
until the echo of emptiness  
becomes the only sound left inside  

There are voices that warn  
but their words fall like ash on stone  
and those who hear do not listen  
they walk straight into the flame  
calling it courage  
when it is only blindness  

The proud call their chains ornaments  
the stubborn kneel before their own will  
as if defiance itself were holy  
and not the shadow of arrogance  
that erodes the heart from within  

I have seen how the cunning  
feed upon the gentle  
how laughter becomes a knife  
how silence becomes consent  
and how even love can be poisoned  
by the cruelty of indifference  

Those who exploit believe themselves strong  
but they walk on borrowed time  
for the spirit they crush  
does not vanish  
it sinks into the deep earth  
where roots remember  
where darkness sharpens itself  
and waits  

And when the waiting ends  
the fire they thought their own  
will turn against them  
revealing not bravery but emptiness  
not strength but decay  
not eternity but a fleeting spark  
lost in the night`,
    content: `There are hands that take without trembling  
draining the vessel of another soul  
until the echo of emptiness  
becomes the only sound left inside  

There are voices that warn  
but their words fall like ash on stone  
and those who hear do not listen  
they walk straight into the flame  
calling it courage  
when it is only blindness  

The proud call their chains ornaments  
the stubborn kneel before their own will  
as if defiance itself were holy  
and not the shadow of arrogance  
that erodes the heart from within  

I have seen how the cunning  
feed upon the gentle  
how laughter becomes a knife  
how silence becomes consent  
and how even love can be poisoned  
by the cruelty of indifference  

Those who exploit believe themselves strong  
but they walk on borrowed time  
for the spirit they crush  
does not vanish  
it sinks into the deep earth  
where roots remember  
where darkness sharpens itself  
and waits  

And when the waiting ends  
the fire they thought their own  
will turn against them  
revealing not bravery but emptiness  
not strength but decay  
not eternity but a fleeting spark  
lost in the night`,
    author: "H",
    date: "2025-10-01",
    image: "https://source.unsplash.com/random/600x400/?flame,dark"
  },
  {
    id: 5,
    title: "Reflections",
    excerpt: `I stand before the surface of the world  
and it gives itself to me as water does  
not in answers  
but in reflections  

A cloud leans down  
and I see it twice  
once in the sky, once in the depth  
and I wonder which is truer  
the passing shadow above  
or the still, trembling image below  

In such moments  
I feel the nearness of places I have not seen  
A lake that opens like a stage curtain  
revealing silence as if it were music  

A city of bridges and canals  
where stone leans into water  
until both become a single dream  
I walk there without moving  
my feet wet with memory  

But even this is not about water  
It is about the unseen thread  
that binds the gaze to the soul  
and the soul to another soul  

It is about the spark that turns a photograph  
into a second heartbeat  
and a poem into a mirror  
in which someone else suddenly appears  

And I think of you reading these lines  
the way you pause before a painting  
the way you hold your camera steady  
waiting for the light to admit its secret  

I know then that my words are not alone  
They have found a reflection in you  
and that is why they live`,
    content: `I stand before the surface of the world  
and it gives itself to me as water does  
not in answers  
but in reflections  

A cloud leans down  
and I see it twice  
once in the sky, once in the depth  
and I wonder which is truer  
the passing shadow above  
or the still, trembling image below  

In such moments  
I feel the nearness of places I have not seen  
A lake that opens like a stage curtain  
revealing silence as if it were music  

A city of bridges and canals  
where stone leans into water  
until both become a single dream  
I walk there without moving  
my feet wet with memory  

But even this is not about water  
It is about the unseen thread  
that binds the gaze to the soul  
and the soul to another soul  

It is about the spark that turns a photograph  
into a second heartbeat  
and a poem into a mirror  
in which someone else suddenly appears  

And I think of you reading these lines  
the way you pause before a painting  
the way you hold your camera steady  
waiting for the light to admit its secret  

I know then that my words are not alone  
They have found a reflection in you  
and that is why they live`,
    author: "H",
    date: "2025-09-24",
    image: "https://source.unsplash.com/random/600x400/?reflection,water"
  },
  {
    id: 6,
    title: "Heaven",
    excerpt: `Then a window opens and light pours in  
Not from above but from within  
The soul remembers its own music  
The heart finds wings it never knew it had  

And sorrow dissolves like salt in water  
Here even silence sings  
Here every color has a thousand shades  
Here I am both myself and more than myself  
And joy is no longer a visitor  
It is the home I had always sought`,
    content: `Then a window opens and light pours in  
Not from above but from within  
The soul remembers its own music  
The heart finds wings it never knew it had  

And sorrow dissolves like salt in water  
Here even silence sings  
Here every color has a thousand shades  
Here I am both myself and more than myself  
And joy is no longer a visitor  
It is the home I had always sought`,
    author: "H",
    date: "2025-09-18",
    image: "https://source.unsplash.com/random/600x400/?heaven,light"
  },
  {
    id: 7,
    title: "Purgatory",
    excerpt: `Days turn in a circle like tired wheels  
Neither joy nor despair rules here  
Only the gray weight of hours  
The steady ticking of unnoticed clocks  

A life without fire, without frost  
I pass people like mist passes stones  
We touch but do not feel  
We speak but do not hear  
And the world turns slowly, endlessly  
A waiting room between nothing and promise`,
    content: `Days turn in a circle like tired wheels  
Neither joy nor despair rules here  
Only the gray weight of hours  
The steady ticking of unnoticed clocks  

A life without fire, without frost  
I pass people like mist passes stones  
We touch but do not feel  
We speak but do not hear  
And the world turns slowly, endlessly  
A waiting room between nothing and promise`,
    author: "Hyowon",
    date: "2025-09-18",
    image: "https://source.unsplash.com/random/600x400/?fog,time"
  },
  {
    id: 8,
    title: "Hell",
    excerpt: `The walls are close though no stone is near  
Darkness breathes upon my skin  
A silence sharp enough to cut the heart  
Loneliness folds me into its endless cloth  

And even my shadow refuses to follow  
Every step is heavy as if the earth denies me  
Every breath an echo that no one answers  
I walk in a valley of absence  
Where memory becomes a chain  
And grief a crown without light`,
    content: `The walls are close though no stone is near  
Darkness breathes upon my skin  
A silence sharp enough to cut the heart  
Loneliness folds me into its endless cloth  

And even my shadow refuses to follow  
Every step is heavy as if the earth denies me  
Every breath an echo that no one answers  
I walk in a valley of absence  
Where memory becomes a chain  
And grief a crown without light`,
    author: "H",
    date: "2025-09-18",
    image: "https://source.unsplash.com/random/600x400/?darkness,abyss"
  }
];



// Pagination settings
const ITEMS_PER_PAGE = 6;
let currentPage = 1;

// DOM Elements
const articlesContainer = document.getElementById('articlesContainer');
const paginationContainer = document.getElementById('pagination');

// Initialize the page
document.addEventListener('DOMContentLoaded', () => {
    displayArticles();
    setupPagination();
    setupArtTabs();
});

// Display articles with pagination
function displayArticles() {
    if (!articlesContainer) return;
    
    // Calculate pagination
    const startIndex = (currentPage - 1) * ITEMS_PER_PAGE;
    const paginatedArticles = articles.slice(startIndex, startIndex + ITEMS_PER_PAGE);
    
    // Clear container
    articlesContainer.innerHTML = '';
    
    // Add articles to the grid
    paginatedArticles.forEach(article => {
        const articleCard = createArticleCard(article);
        articlesContainer.appendChild(articleCard);
    });
    
    // Update pagination
    updatePagination();
}

// Create an article card element
function createArticleCard(article) {
    const card = document.createElement('div');
    card.className = 'article-card';
    
    // a \n helyett <br> tageket rakunk be
    const formattedExcerpt = article.excerpt.replace(/\n/g, '<br>');
    
    card.innerHTML = `
        <div class="article-content">
            <h3>${article.title}</h3>
            <p class="poem-text">${formattedExcerpt}</p>
            <div class="article-meta">
                <span>By ${article.author} • ${formatDate(article.date)}</span>
            </div>
        </div>
    `;
    
    return card;
}

// Format date to a readable format
function formatDate(dateString) {
    const options = { year: 'numeric', month: 'long', day: 'numeric' };
    return new Date(dateString).toLocaleDateString('en-US', options);
}

// Set up pagination
function setupPagination() {
    if (!paginationContainer) return;
    
    const pageCount = Math.ceil(articles.length / ITEMS_PER_PAGE);
    
    // Clear existing pagination
    paginationContainer.innerHTML = '';
    
    // Previous button
    const prevButton = document.createElement('button');
    prevButton.innerText = 'Previous';
    prevButton.disabled = currentPage === 1;
    prevButton.addEventListener('click', () => {
        if (currentPage > 1) {
            currentPage--;
            displayArticles();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
    });
    paginationContainer.appendChild(prevButton);
    
    // Page numbers
    for (let i = 1; i <= pageCount; i++) {
        const pageButton = document.createElement('button');
        pageButton.innerText = i;
        pageButton.className = currentPage === i ? 'active' : '';
        pageButton.addEventListener('click', () => {
            currentPage = i;
            displayArticles();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });
        paginationContainer.appendChild(pageButton);
    }
    
    // Next button
    const nextButton = document.createElement('button');
    nextButton.innerText = 'Next';
    nextButton.disabled = currentPage === pageCount;
    nextButton.addEventListener('click', () => {
        if (currentPage < pageCount) {
            currentPage++;
            displayArticles();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
    });
    paginationContainer.appendChild(nextButton);
}

// Update pagination buttons state
function updatePagination() {
    if (!paginationContainer) return;
    
    const pageCount = Math.ceil(articles.length / ITEMS_PER_PAGE);
    const buttons = paginationContainer.querySelectorAll('button');
    
    buttons.forEach((button, index) => {
        if (index === 0) {
            // Previous button
            button.disabled = currentPage === 1;
        } else if (index === buttons.length - 1) {
            // Next button
            button.disabled = currentPage === pageCount;
        } else {
            // Page number buttons
            const pageNum = parseInt(button.innerText);
            button.classList.toggle('active', pageNum === currentPage);
        }
    });
}

// Admin credentials (in a real app, this would be handled securely on the backend)
const ADMIN_CREDENTIALS = {
    username: "admin",
    password: "poetry123"
};

// DOM Elements
const featuredPoemsContainer = document.getElementById('featuredPoems');
const loginModal = document.getElementById('loginModal');
const loginBtn = document.getElementById('admin-login');
const closeBtn = document.querySelector('.close');
const loginForm = document.getElementById('loginForm');

// Check if user is logged in
let isAdmin = false;

// Initialize the page
document.addEventListener('DOMContentLoaded', () => {
    displayPoems();
    setupEventListeners();
});

// Display poems in the grid
function displayPoems() {
    if (!featuredPoemsContainer) return;
    
    featuredPoemsContainer.innerHTML = '';
    
    poems.forEach(poem => {
        const poemCard = createPoemCard(poem);
        featuredPoemsContainer.appendChild(poemCard);
    });
}

// Create a poem card element
function createPoemCard(poem) {
    const card = document.createElement('div');
    card.className = 'poem-card';
    card.dataset.id = poem.id;
    
    card.innerHTML = `
        <div class="poem-content">
            <h3>${poem.title}</h3>
            <p>${poem.content.substring(0, 150)}${poem.content.length > 150 ? '...' : ''}</p>
            <div class="poem-meta">
                <span>By ${poem.author} • ${formatDate(poem.date)}</span>
                <button class="like-btn ${poem.isLiked ? 'liked' : ''}" data-id="${poem.id}">
                    <i class="fas fa-heart"></i> <span>${poem.likes}</span>
                </button>
            </div>
        </div>
    `;
    
    return card;
}

// Format date to a readable format
function formatDate(dateString) {
    const options = { year: 'numeric', month: 'long', day: 'numeric' };
    return new Date(dateString).toLocaleDateString('en-US', options);
}

// Set up event listeners
function setupEventListeners() {
    // Login button click
    if (loginBtn) {
        loginBtn.addEventListener('click', (e) => {
            e.preventDefault();
            loginModal.style.display = 'flex';
        });
    }
    
    // Close modal button
    if (closeBtn) {
        closeBtn.addEventListener('click', () => {
            loginModal.style.display = 'none';
        });
    }
    
    // Close modal when clicking outside
    window.addEventListener('click', (e) => {
        if (e.target === loginModal) {
            loginModal.style.display = 'none';
        }
    });
    
    // Login form submission
    if (loginForm) {
        loginForm.addEventListener('submit', handleLogin);
    }
    
    // Like button click (using event delegation)
    document.addEventListener('click', (e) => {
        const likeBtn = e.target.closest('.like-btn');
        if (likeBtn) {
            e.preventDefault();
            const poemId = parseInt(likeBtn.dataset.id);
            toggleLike(poemId);
        }
    });
}

// Handle login form submission
function handleLogin(e) {
    e.preventDefault();
    
    const username = document.getElementById('username').value;
    const password = document.getElementById('password').value;
    
    if (username === ADMIN_CREDENTIALS.username && password === ADMIN_CREDENTIALS.password) {
        isAdmin = true;
        alert('Login successful! You now have admin privileges.');
        loginModal.style.display = 'none';
        // In a real app, you would set a secure session token here
        updateUIForAdmin();
    } else {
        alert('Invalid credentials. Please try again.');
    }
    
    // Clear the form
    loginForm.reset();
}

// Toggle like on a poem
function toggleLike(poemId) {
    const poem = poems.find(p => p.id === poemId);
    if (!poem) return;
    
    poem.isLiked = !poem.isLiked;
    poem.likes += poem.isLiked ? 1 : -1;
    
    // Update the UI
    const likeBtn = document.querySelector(`.like-btn[data-id="${poemId}"]`);
    if (likeBtn) {
        likeBtn.classList.toggle('liked', poem.isLiked);
        const likeCount = likeBtn.querySelector('span');
        if (likeCount) {
            likeCount.textContent = poem.likes;
        }
    }
    
    // In a real app, you would save this to a backend
    console.log(`Poem ${poemId} ${poem.isLiked ? 'liked' : 'unliked'}. Total likes: ${poem.likes}`);
}

// Update UI when admin logs in
function updateUIForAdmin() {
    // Change login button to admin dashboard
    if (loginBtn) {
        loginBtn.textContent = 'Admin Panel';
        loginBtn.href = 'admin.html'; // You would create this page for admin functions
    }
    
    // Add edit/delete buttons to poems
    // This is a simplified example - in a real app, you'd have more robust admin features
    console.log('Admin mode activated');
}

// In a real application, you would have functions to:
// - Add new poems
// - Edit existing poems
// - Delete poems
// - Save/load data from a backend server